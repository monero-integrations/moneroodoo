<templates>
    <t t-name="payment_monero_rpc.MoneroPaymentPopup" owl="1">
        <Dialog title="props.title || 'Pay with Monero'" 
                footer="false" 
                bodyClass="'w-100 h-100 d-flex flex-column justify-content-center align-items-center'">
            <p class="text-center mb-3">Scan with Monero wallet</p>
            <img t-att-src="'data:image/png;base64,' + props.qrCode" width="200" class="qr-container" alt="Monero Payment QR Code"/>
            
            <div class="amount-container text-center mb-3">
                <div class="fiat-amount">
                    <strong>Amount:</strong> 
                    <t t-esc="props.formattedAmount"/>
                </div>
                <div class="monero-amount">
                    <strong>Monero:</strong> 
                    É± <span t-esc="props.formattedMoneroAmount"/>
                    <button class="btn btn-sm btn-link p-0 ml-2 copy-btn" 
                            t-on-click="() => this.copyMoneroAmount()"
                            title="Copy Monero Amount">
                        <i class="fa fa-copy fa-lg"/>
                    </button>
                </div>
                <div class="exchange-rate small text-muted">
                    <strong>Exchange Rate:</strong> 
                    <t t-esc="props.exchangeRate"/>
                </div>
            </div>
            
            <div class="order-ref mb-3">
                <strong>Order:</strong> 
                <t t-esc="props.orderName"/>
            </div>
            <div class="seller-address text-muted" style="font-size: 0.65rem; max-width: 100%; overflow: hidden; text-overflow: ellipsis;">
                <strong>Seller:</strong> 
                <span t-att-title="props.sellerAddress" t-esc="props.sellerAddress" t-on-click="() => this.copySellerAddress()" title="Copy Address"/>
               <i class="fa fa-copy"/>
            </div>
            
            <div class="confirmation-status mb-2">
                <strong>Confirmation:</strong> 
                <span t-esc="props.confirmationCount || 0"/> out of <span t-esc="props.confirmationCountMax || 10"/> confirmations
            </div>
            
            
            <!--
                {
                    progressWidth: '90%',
                    progressHeight: '12px',
                    progressVariant: 'info',
                    confirmationCount: 3,
                    stepPercentage: 10,  // 10% per step (for 10 confirmations)
                    maxConfirmations: 10
                }
            -->
            
            <div class="progress mb-3" t-att-style="'width: ' + (props.progressWidth || '0%') + '; height: ' + (props.progressHeight || '10px') + ';'">
                <div class="progress-bar" 
                     t-att-class="'bg-' + (props.progressVariant || 'success')"
                     role="progressbar" 
                     t-att-style="'width: ' + ((props.confirmationCount || 0) * (props.stepPercentage || 10)) + '%;'"
                     t-att-aria-valuenow="props.confirmationCount || 0"
                     t-att-aria-valuemax="props.maxConfirmations || 10"
                     aria-valuemin="0">
                </div>
            </div>

            <div class="alert" t-att-class="'alert-' + props.paymentStatusClass">
                <i t-att-class="'fa ' + props.statusIconClass"/>
                <span t-esc="props.statusMessage"/> 
            </div>
            
            <div class="text-muted small">
                Payment verifies automatically
            </div>
        </Dialog>
    </t>
</templates>
