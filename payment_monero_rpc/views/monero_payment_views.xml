<?xml version="1.0" encoding="utf-8"?>
<odoo>
q    <record id="view_monero_payment_tree" model="ir.ui.view">
        <field name="name">monero.payment.tree</field>
        <field name="model">monero.payment</field>
        <field name="arch" type="xml">
            <list>
                <field name="display_name"/>
                <field name="order_ref"/>
                <field name="amount"/>
                <field name="currency"/>
                <field name="state"/>
                <field name="create_date"/>
            </list>
        </field>
    </record>

    <record id="view_monero_payment_form" model="ir.ui.view">
        <field name="name">monero.payment.form</field>
        <field name="model">monero.payment</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <group col="2">
                        <group string="Payment Details">
                            <field name="display_name" readonly="1"/>
                            <field name="order_ref" readonly="1"/>
                            <field name="amount" readonly="1"/>
                            <field name="currency" readonly="1"/>
                            <field name="description" readonly="1"/>
                        </group>
                        <group string="Address Information">
                            <field name="payment_id" readonly="1"/>
                            <field name="address_seller" readonly="1" string="Seller Address"/>
                            <field name="address_buyer" readonly="1" string="Buyer Address"/>
                            <div class="oe_inline">
                                <field name="image_qr" widget="image" class="oe_avatar" width="150" height="150"/>
                            </div>
                        </group>
                    </group>

                    <notebook>
                        <page string="Transactions">
                            <field name="transaction_ids" context="{'form_view_ref': 'payment_monero_rpc.view_monero_transaction_form'}"/>
                        </page>
                        <page string="Logs">
                            <field name="message_ids" widget="mail_thread"/>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="view_monero_transaction_tree" model="ir.ui.view">
        <field name="name">monero.transaction.tree</field>
        <field name="model">monero.transaction</field>
        <field name="arch" type="xml">
            <list>
                <field name="timestamp"/>
                <field name="payment_id"/>
                <field name="txid"/>
                <field name="amount"/>
                <field name="block_height"/>
                <field name="confirmations"/>
            </list>
        </field>
    </record>

    <record id="view_monero_transaction_form" model="ir.ui.view">
        <field name="name">monero.transaction.form</field>
        <field name="model">monero.transaction</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <group>
                        <group string="Transaction Information">
                            <field name="payment_id" readonly="1"/>
                            <field name="txid" readonly="1"/>
                            <field name="amount" readonly="1"/>
                            <field name="block_height" readonly="1"/>
                            <field name="confirmations" readonly="1"/>
                            <field name="timestamp" readonly="1"/>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="view_monero_payment_method_tree" model="ir.ui.view">
        <field name="name">monero.payment.method.tree</field>
        <field name="model">payment.method</field>
        <field name="arch" type="xml">
            <list>
                <field name="name"/>
                <field name="supported_currency_ids" widget="many2many_tags"/>
            </list>
        </field>
    </record>

    <record id="view_payment_provider_form_inherit" model="ir.ui.view">
        <field name="name">payment.provider.form.inherit.monero</field>
        <field name="model">payment.provider</field>
        <field name="inherit_id" ref="payment.payment_provider_form"/>
        <field name="arch" type="xml">
            <!-- Add fields to the state group -->
            <xpath expr="//group[@name='payment_state']" position="inside">
                <field name="rpc_url"/>
                <field name="network_type"/>
                <field name="rpc_user"/>
                <field name="rpc_password" password="True"/>
            </xpath>

            <xpath expr="//page[@name='credentials']/group[@name='provider_credentials']" position="inside">
                <field name="wallet_file"/>
                <field name="wallet_dir"/>
                <field name="wallet_password" password="True"/>
            </xpath>

            <xpath expr="//page[@name='configuration']/group[@name='provider_config']" position="inside">
                <group string="Account Details" name="monero_account_details">
                    <field name="wallet_address_value" readonly="1" string="Current Address"/>
                    <field name="account_index" readonly="1" string="Account Index"/>
                    <field name="account_balance" readonly="1" string="Balance (XMR)"/>
                    <field name="unlocked_balance" readonly="1" string="Spendable Balance (XMR)"/>
                    <field name="wallet_status" readonly="1" string="Wallet Status"/>
                    <button name="fetch_wallet_addresses" string="Refresh Wallets" class="btn-primary" type="object"/>
                </group>
            </xpath>

            <xpath expr="//notebook" position="inside">
                <page string="Advanced">
                    <group>
                        <field name="rpc_timeout" string="RPC Timeout (seconds)"/>
                        <field name="restaurant_mode" string="Is a Bar/Restaurant"/>
                        <field name="confirmation_threshold"/>
                    </group>
                </page>
            </xpath>
        </field>
    </record>
    
    <record id="view_monero_payment_search" model="ir.ui.view">
        <field name="name">monero.payment.search</field>
        <field name="model">monero.payment</field>
        <field name="arch" type="xml">
            <search>
                <field name="order_ref"/>
                <field name="state"/>
            </search>
        </field>
    </record>

    <record id="action_monero_payments" model="ir.actions.act_window">
        <field name="name">Monero Payments</field>
        <field name="res_model">monero.payment</field>
        <field name="search_view_id" ref="payment_monero_rpc.view_monero_payment_search"/>
        <field name="view_mode">list</field>
    </record>

    <record id="action_monero_transactions" model="ir.actions.act_window">
        <field name="name">Monero Transactions</field>
        <field name="res_model">monero.transaction</field>
        <field name="view_mode">list,form</field>
    </record>
</odoo>

