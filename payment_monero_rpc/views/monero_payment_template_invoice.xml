<!-- Verify invoice template -->
<odoo>
    <template id="monero_payment_invoice">
        <t t-call="web.html_container">
            <t t-call="web.external_layout">
                <div class="page">
                    <div class="row mb-4">
                        <div class="col-6">
                            <h2 t-esc="_('Payment Invoice')"/>
                            <p class="mb-1">
                                <strong t-esc="_('Date:')"/> 
                                <span t-esc="format_datetime(payment.create_date)"/>
                            </p>
                            <p class="mb-1">
                                <strong t-esc="_('Reference:')"/> 
                                <span t-esc="payment.order_ref"/>
                            </p>
                        </div>
                        <div class="col-6 text-right">
                            <h3 t-esc="_('Monero Payment')"/>
                            <p t-if="payment.state == 'confirmed'" class="text-success">
                                <strong t-esc="_('Status:')"/> <span t-esc="_('Confirmed')"/>
                            </p>
                            <p t-elif="payment.state == 'paid_unconfirmed'" class="text-warning">
                                <strong t-esc="_('Status:')"/> <span t-esc="_('Pending Confirmations')"/>
                            </p>
                            <p t-else="" class="text-info">
                                <strong t-esc="_('Status:')"/> <span t-esc="_('Pending')"/>
                            </p>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="col-12">
                            <h4 t-esc="_('Payment Details')"/>
                            <table class="table table-sm">
                                <tr>
                                    <td width="30%" t-esc="_('Amount')"/>
                                    <td>
                                        <span t-esc="'%.12f' % payment.amount"/> XMR
                                        <small class="text-muted">
                                            (â‰ˆ <span t-esc="'%.2f' % payment.original_amount"/> 
                                            <span t-esc="payment.original_currency"/>)
                                        </small>
                                    </td>
                                </tr>
                                <tr>
                                    <td t-esc="_('Exchange Rate')"/>
                                    <td>
                                        1 XMR = <span t-esc="'%.2f' % payment.exchange_rate"/> 
                                        <span t-esc="payment.original_currency"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td t-esc="_('Payment Address')"/>
                                    <td><code t-esc="payment.address"/></td>
                                </tr>
                                <tr>
                                    <td t-esc="_('Payment ID')"/>
                                    <td><code t-esc="payment.payment_id"/></td>
                                </tr>
                                <tr t-if="payment.state == 'confirmed'">
                                    <td t-esc="_('Confirmations')"/>
                                    <td>
                                        <span t-esc="payment.confirmations"/>/
                                        <span t-esc="payment.required_confirmations"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td>
                                        <img t-att-src="'/shop/payment/monero/qr/' + str(payment['id'])" 
                                             class="img-fluid" 
                                             style="max-width: 250px"
                                             alt="Monero Payment QR Code"/>
                                        <p class="mt-2 mb-0">
                                            <i class="fa fa-qrcode"/> 
                                            Scan with Monero wallet
                                        </p>                                    
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="col-12">
                            <h4 t-esc="_('Transactions')"/>
                            <t t-if="payment.transaction_ids">
                                <table class="table table-sm">
                                    <thead>
                                        <tr>
                                            <th t-esc="_('TXID')"/>
                                            <th t-esc="_('Amount (XMR)')"/>
                                            <th t-esc="_('Confirmations')"/>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <t t-foreach="payment.transaction_ids" t-as="tx">
                                            <tr>
                                                <td><small><code t-esc="tx.txid"/></small></td>
                                                <td t-esc="'%.12f' % tx.amount"/>
                                                <td t-esc="tx.confirmations"/>
                                            </tr>
                                        </t>
                                    </tbody>
                                </table>
                            </t>
                            <t t-else="">
                                <p class="text-muted" t-esc="_('No transactions recorded yet.')"/>
                            </t>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="col-12 text-center text-muted">
                            <small t-esc="_('This is an automatically generated invoice for Monero payment. For verification, please check the payment proof document.')"/>
                        </div>
                    </div>
                </div>
            </t>
        </t>
    </template>
</odoo>
